<!--<?xml version="1.0" encoding="UTF-8"?>-->
<!--<!DOCTYPE mapper-->
<!--        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"-->
<!--        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">-->
<!--<mapper namespace="com.itheima.stock.mapper.SysUserMapper4Sys">-->

<!--    <resultMap id="BaseResultMap" type="com.itheima.stock.pojo.SysUser">-->
<!--            <id property="id" column="id" jdbcType="VARCHAR"/>-->
<!--            <result property="username" column="username" jdbcType="VARCHAR"/>-->
<!--            <result property="password" column="password" jdbcType="VARCHAR"/>-->
<!--            <result property="phone" column="phone" jdbcType="VARCHAR"/>-->
<!--            <result property="realName" column="real_name" jdbcType="VARCHAR"/>-->
<!--            <result property="nickName" column="nick_name" jdbcType="VARCHAR"/>-->
<!--            <result property="email" column="email" jdbcType="VARCHAR"/>-->
<!--            <result property="status" column="status" jdbcType="TINYINT"/>-->
<!--            <result property="sex" column="sex" jdbcType="TINYINT"/>-->
<!--            <result property="deleted" column="deleted" jdbcType="TINYINT"/>-->
<!--            <result property="createId" column="create_id" jdbcType="VARCHAR"/>-->
<!--            <result property="updateId" column="update_id" jdbcType="VARCHAR"/>-->
<!--            <result property="createWhere" column="create_where" jdbcType="TINYINT"/>-->
<!--            <result property="createTime" column="create_time" jdbcType="TIMESTAMP"/>-->
<!--            <result property="updateTime" column="update_time" jdbcType="TIMESTAMP"/>-->
<!--    </resultMap>-->

<!--    <sql id="Base_Column_List">-->
<!--        id,username,password,-->
<!--        phone,real_name,nick_name,-->
<!--        email,status,sex,-->
<!--        deleted,create_id,update_id,-->
<!--        create_where,create_time,update_time-->
<!--    </sql>-->

<!--    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">-->
<!--        select-->
<!--        <include refid="Base_Column_List" />-->
<!--        from sys_user-->
<!--        where  id = #{id,jdbcType=VARCHAR} -->
<!--    </select>-->

<!--    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">-->
<!--        delete from sys_user-->
<!--        where  id = #{id,jdbcType=VARCHAR} -->
<!--    </delete>-->
<!--    <insert id="insert" keyColumn="id" keyProperty="id" parameterType="com.itheima.stock.pojo.SysUser" useGeneratedKeys="true">-->
<!--        insert into sys_user-->
<!--        ( id,username,password-->
<!--        ,phone,real_name,nick_name-->
<!--        ,email,status,sex-->
<!--        ,deleted,create_id,update_id-->
<!--        ,create_where,create_time,update_time-->
<!--        )-->
<!--        values (#{id,jdbcType=VARCHAR},#{username,jdbcType=VARCHAR},#{password,jdbcType=VARCHAR}-->
<!--        ,#{phone,jdbcType=VARCHAR},#{realName,jdbcType=VARCHAR},#{nickName,jdbcType=VARCHAR}-->
<!--        ,#{email,jdbcType=VARCHAR},#{status,jdbcType=TINYINT},#{sex,jdbcType=TINYINT}-->
<!--        ,#{deleted,jdbcType=TINYINT},#{createId,jdbcType=VARCHAR},#{updateId,jdbcType=VARCHAR}-->
<!--        ,#{createWhere,jdbcType=TINYINT},#{createTime,jdbcType=TIMESTAMP},#{updateTime,jdbcType=TIMESTAMP}-->
<!--        )-->
<!--    </insert>-->
<!--    <insert id="insertSelective" keyColumn="id" keyProperty="id" parameterType="com.itheima.stock.pojo.SysUser" useGeneratedKeys="true">-->
<!--        insert into sys_user-->
<!--        <trim prefix="(" suffix=")" suffixOverrides=",">-->
<!--                <if test="id != null">id,</if>-->
<!--                <if test="username != null">username,</if>-->
<!--                <if test="password != null">password,</if>-->
<!--                <if test="phone != null">phone,</if>-->
<!--                <if test="realName != null">realName,</if>-->
<!--                <if test="nickName != null">nickName,</if>-->
<!--                <if test="email != null">email,</if>-->
<!--                <if test="status != null">status,</if>-->
<!--                <if test="sex != null">sex,</if>-->
<!--                <if test="deleted != null">deleted,</if>-->
<!--                <if test="createId != null">createId,</if>-->
<!--                <if test="updateId != null">updateId,</if>-->
<!--                <if test="createWhere != null">createWhere,</if>-->
<!--                <if test="createTime != null">createTime,</if>-->
<!--                <if test="updateTime != null">updateTime,</if>-->
<!--        </trim>-->
<!--        <trim prefix="values (" suffix=")" suffixOverrides=",">-->
<!--                <if test="id != null">id = #{id,jdbcType=VARCHAR},</if>-->
<!--                <if test="username != null">username = #{username,jdbcType=VARCHAR},</if>-->
<!--                <if test="password != null">password = #{password,jdbcType=VARCHAR},</if>-->
<!--                <if test="phone != null">phone = #{phone,jdbcType=VARCHAR},</if>-->
<!--                <if test="realName != null">real_name = #{realName,jdbcType=VARCHAR},</if>-->
<!--                <if test="nickName != null">nick_name = #{nickName,jdbcType=VARCHAR},</if>-->
<!--                <if test="email != null">email = #{email,jdbcType=VARCHAR},</if>-->
<!--                <if test="status != null">status = #{status,jdbcType=TINYINT},</if>-->
<!--                <if test="sex != null">sex = #{sex,jdbcType=TINYINT},</if>-->
<!--                <if test="deleted != null">deleted = #{deleted,jdbcType=TINYINT},</if>-->
<!--                <if test="createId != null">create_id = #{createId,jdbcType=VARCHAR},</if>-->
<!--                <if test="updateId != null">update_id = #{updateId,jdbcType=VARCHAR},</if>-->
<!--                <if test="createWhere != null">create_where = #{createWhere,jdbcType=TINYINT},</if>-->
<!--                <if test="createTime != null">create_time = #{createTime,jdbcType=TIMESTAMP},</if>-->
<!--                <if test="updateTime != null">update_time = #{updateTime,jdbcType=TIMESTAMP},</if>-->
<!--        </trim>-->
<!--    </insert>-->
<!--    <update id="updateByPrimaryKeySelective" parameterType="com.itheima.stock.pojo.SysUser">-->
<!--        update sys_user-->
<!--        <set>-->
<!--                <if test="username != null">-->
<!--                    username = #{username,jdbcType=VARCHAR},-->
<!--                </if>-->
<!--                <if test="password != null">-->
<!--                    password = #{password,jdbcType=VARCHAR},-->
<!--                </if>-->
<!--                <if test="phone != null">-->
<!--                    phone = #{phone,jdbcType=VARCHAR},-->
<!--                </if>-->
<!--                <if test="realName != null">-->
<!--                    real_name = #{realName,jdbcType=VARCHAR},-->
<!--                </if>-->
<!--                <if test="nickName != null">-->
<!--                    nick_name = #{nickName,jdbcType=VARCHAR},-->
<!--                </if>-->
<!--                <if test="email != null">-->
<!--                    email = #{email,jdbcType=VARCHAR},-->
<!--                </if>-->
<!--                <if test="status != null">-->
<!--                    status = #{status,jdbcType=TINYINT},-->
<!--                </if>-->
<!--                <if test="sex != null">-->
<!--                    sex = #{sex,jdbcType=TINYINT},-->
<!--                </if>-->
<!--                <if test="deleted != null">-->
<!--                    deleted = #{deleted,jdbcType=TINYINT},-->
<!--                </if>-->
<!--                <if test="createId != null">-->
<!--                    create_id = #{createId,jdbcType=VARCHAR},-->
<!--                </if>-->
<!--                <if test="updateId != null">-->
<!--                    update_id = #{updateId,jdbcType=VARCHAR},-->
<!--                </if>-->
<!--                <if test="createWhere != null">-->
<!--                    create_where = #{createWhere,jdbcType=TINYINT},-->
<!--                </if>-->
<!--                <if test="createTime != null">-->
<!--                    create_time = #{createTime,jdbcType=TIMESTAMP},-->
<!--                </if>-->
<!--                <if test="updateTime != null">-->
<!--                    update_time = #{updateTime,jdbcType=TIMESTAMP},-->
<!--                </if>-->
<!--        </set>-->
<!--        where   id = #{id,jdbcType=VARCHAR} -->
<!--    </update>-->
<!--    <update id="updateByPrimaryKey" parameterType="com.itheima.stock.pojo.SysUser">-->
<!--        update sys_user-->
<!--        set -->
<!--            username =  #{username,jdbcType=VARCHAR},-->
<!--            password =  #{password,jdbcType=VARCHAR},-->
<!--            phone =  #{phone,jdbcType=VARCHAR},-->
<!--            real_name =  #{realName,jdbcType=VARCHAR},-->
<!--            nick_name =  #{nickName,jdbcType=VARCHAR},-->
<!--            email =  #{email,jdbcType=VARCHAR},-->
<!--            status =  #{status,jdbcType=TINYINT},-->
<!--            sex =  #{sex,jdbcType=TINYINT},-->
<!--            deleted =  #{deleted,jdbcType=TINYINT},-->
<!--            create_id =  #{createId,jdbcType=VARCHAR},-->
<!--            update_id =  #{updateId,jdbcType=VARCHAR},-->
<!--            create_where =  #{createWhere,jdbcType=TINYINT},-->
<!--            create_time =  #{createTime,jdbcType=TIMESTAMP},-->
<!--            update_time =  #{updateTime,jdbcType=TIMESTAMP}-->
<!--        where   id = #{id,jdbcType=VARCHAR} -->
<!--    </update>-->

<!--    &lt;!&ndash;思路：-->
<!--        1.用户表与自身表2次左外连接查询获取创建者和更新者的用户信息-->
<!--        2.自定义映射规则-->
<!--    &ndash;&gt;-->
<!--    <resultMap id="userQueryMap" type="com.itheima.stock.vo.resp.UserQueryVo" extends="BaseResultMap">-->
<!--        <result property="createUserName" column="createUserName"/>-->
<!--        <result property="updateUserName" column="updateUserName"/>-->
<!--    </resultMap>-->

<!--    <select id="pageUsers" resultMap="userQueryMap">-->
<!--        SELECT-->
<!--            u1.*,-->
<!--            u2.username AS createUserName,-->
<!--            u3.username AS updateUserName-->
<!--        FROM-->
<!--        sys_user AS u1-->
<!--        LEFT JOIN sys_user AS u2 ON u1.create_id = u2.id-->
<!--        LEFT JOIN sys_user AS u3 ON u1.update_id = u3.id-->
<!--        <where>-->
<!--               AND u1.deleted=1-->
<!--            <if test="userName!=null and userName.trim!=''">-->
<!--               AND u1.username like concat('%',#{userName},'%')-->
<!--            </if>-->
<!--            <if test="nickName!=null and nickName.trim!=''">-->
<!--                AND u1.nick_name like concat('%',#{nickName},'%')-->
<!--            </if>-->
<!--            <if test="startTime!=null and startTime.trim!=''">-->
<!--                AND u1.create_time >=#{startTime}-->
<!--            </if>-->
<!--            <if test="endTime!=null and endTime.trim!=''">-->
<!--                AND u1.create_time &lt;=#{endTime}-->
<!--            </if>-->
<!--        </where>-->
<!--    </select>-->
<!--    <select id="findUserByUserName" resultMap="BaseResultMap">-->
<!--        select <include refid="Base_Column_List"/>  from sys_user where username=#{userName}-->
<!--    </select>-->

<!--    <update id="updateUserStatus4Deleted">-->
<!--        update sys_user set deleted =0,update_time=now() where id in-->
<!--        <foreach collection="userIds" item="userId" separator="," open="(" close=")">-->
<!--            #{userId}-->
<!--        </foreach>-->
<!--    </update>-->
<!--</mapper>-->
